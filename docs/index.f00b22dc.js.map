{"mappings":"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","sources":["widgets/Widget.js","widgets/CurrentTime.js","widgets/Image.js","widgets/Valute.js","index.js"],"sourcesContent":["class Widget {\r\n\r\n\tUNIC_CLASS = '';\r\n\r\n\tCONTAINER = '';\r\n\tBOX = '';\r\n\tMODAL = '';\r\n\tMODAL_CONTENT = '';\r\n\r\n\tWIDGET = null;\r\n\r\n\tstatic Instance = null\r\n\r\n\tconstructor({ container, box, modal, modalContent }) {\r\n\t\tthis.CONTAINER = container;\r\n\t\tthis.BOX = box;\r\n\t\tthis.MODAL = modal;\r\n\t\tthis.MODAL_CONTENT = modalContent;\r\n\r\n\t\tthis.bindEvent();\r\n\t}\r\n\r\n\tbindEvent() {\r\n\t\t// Удаление\r\n\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\tconst button = e.target.closest('.widget__remove-button');\r\n\t\t\tif (button) {\r\n\t\t\t\tconst widget = button.closest('.widget')\r\n\t\t\t\tthis.close(widget);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Перемещение\r\n\t\tdocument.addEventListener('dragstart', (e) => {\r\n\t\t\tconst target = e.target.closest('.widget');\r\n\t\t\tif (target) {\r\n\t\t\t\ttarget.closest(this.BOX).classList.add('original-box');\r\n\t\t\t\ttarget.classList.add('draggable');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.addEventListener('dragend', (e) => {\r\n\t\t\tconst target = e.target.closest('.widget');\r\n\t\t\tif (target) {\r\n\t\t\t\ttarget.classList.remove('draggable');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.addEventListener('dragover', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tconst target = e.target.closest(this.BOX);\r\n\t\t\tif (!target) {\r\n\t\t\t\tconst dragover = document\r\n\t\t\t\t\t.querySelector(this.CONTAINER)\r\n\t\t\t\t\t.querySelector('.dragover');\r\n\r\n\t\t\t\tif (dragover) dragover.classList.remove('dragover');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst oldDragover = document.querySelector('.dragover');\r\n\t\t\tif (oldDragover && oldDragover !== target) {\r\n\t\t\t\toldDragover.classList.remove('dragover');\r\n\t\t\t}\r\n\r\n\t\t\ttarget.classList.add('dragover');\r\n\t\t});\r\n\r\n\t\tdocument.addEventListener('drop', (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\tconst target = e.target.closest(this.BOX);\r\n\t\t\tif (!target) return;\r\n\r\n\t\t\tconst originalWidget = document.querySelector('.draggable');\r\n\t\t\tconst currentWidget = target.querySelector('.widget');\r\n\t\t\tconst originalBox = document\r\n\t\t\t\t.querySelector(this.CONTAINER)\r\n\t\t\t\t.querySelector('.original-box');\r\n\r\n\t\t\tif (currentWidget) {\r\n\t\t\t\toriginalBox.append(currentWidget);\r\n\t\t\t}\r\n\r\n\t\t\toriginalBox.classList.remove('original-box');\r\n\r\n\t\t\tconst oldDragover = document.querySelector('.dragover');\r\n\t\t\tif (oldDragover) {\r\n\t\t\t\toldDragover.classList.remove('dragover');\r\n\t\t\t}\r\n\r\n\t\t\ttarget.append(originalWidget);\r\n\t\t});\r\n\t};\r\n\r\n\tcreateWidget () {\r\n\t\tconst widget = document.createElement('div');\r\n\t\twidget.classList.add('widget', this.UNIC_CLASS);\r\n\t\twidget.setAttribute('draggable', true);\r\n\r\n\t\tconst html = this.render();\r\n\t\tif (html && this.CONTAINER) {\r\n\t\t\twidget.insertAdjacentHTML('beforeend', html);\r\n\t\t\twidget.insertAdjacentHTML('afterbegin', this.renderButton());\r\n\r\n\t\t\tthis.WIDGET = widget\r\n\r\n\t\t\tlet currentBox;\r\n\t\t\tconst boxs = document\r\n\t\t\t\t.querySelector(this.CONTAINER)\r\n\t\t\t\t.querySelectorAll(this.BOX);\r\n\r\n\t\t\tfor (let i = 0; i < boxs.length; i++) {\r\n\t\t\t\tconst box = boxs[i];\r\n\t\t\t\tif (box.querySelector('.widget')) continue;\r\n\t\t\t\tcurrentBox = box;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcurrentBox.append(widget);\r\n\t\t}\r\n\t};\r\n\r\n\tclose = (target) => {\r\n\t\ttarget.remove();\r\n\t};\r\n\r\n\trender = () => false;\r\n\r\n\trenderButton = () => `\r\n\t\t<button class=\"w-control widget__remove-button\">\r\n\t\t\t&times;\r\n\t\t</button>\r\n\t`;\r\n}\r\n\r\nexport default Widget;\r\n","import Widget from './Widget';\r\n\r\nclass CurrentTime extends Widget {\r\n\tstatic Instance = null;\r\n\r\n\tUNIC_CLASS = 'widget-time';\r\n\r\n\tHOUR = '00';\r\n\tMINUTE = '00';\r\n\tSECONDS = '00';\r\n\r\n\tconstructor(props) {\r\n\t\tif (CurrentTime.Instance) return CurrentTime.Instance;\r\n\t\tsuper(props);\r\n\r\n\t\tthis.updateTime();\r\n\r\n\t\tCurrentTime.Instance = this;\r\n\t\treturn CurrentTime.Instance;\r\n\t}\r\n\r\n\tupdateTime() {\r\n\t\tconst date = new Date();\r\n\t\tconst [hour, minute, second] = date.toLocaleTimeString().split(':');\r\n\t\tconst ms = date.getMilliseconds();\r\n\r\n\t\tthis.HOUR = hour;\r\n\t\tthis.MINUTE = minute;\r\n\t\tthis.SECONDS = second;\r\n\r\n\t\tconst widgets = document\r\n\t\t\t.querySelector(this.CONTAINER)\r\n\t\t\t.querySelectorAll(`.${this.UNIC_CLASS}`);\r\n\t\t\t\r\n\t\t[...widgets].forEach((node) => {\r\n\t\t\tnode.querySelector('.hour').innerText = this.HOUR;\r\n\t\t\tnode.querySelector('.minute').innerText = this.MINUTE;\r\n\t\t\tnode.querySelector('.seconds').innerText = this.SECONDS;\r\n\t\t});\r\n\r\n\t\tsetTimeout(() => requestAnimationFrame(() => this.updateTime()), 1000 - ms);\r\n\t}\r\n\r\n\tcreateWidget() {\r\n\t\tsuper.createWidget();\r\n\t}\r\n\r\n\trender = () => `\r\n\t\t<p>\r\n\t\t\t<span class=\"hour\">${this.HOUR}</span>\r\n\t\t\t:\r\n\t\t\t<span class=\"minute\">${this.MINUTE}</span>\r\n\t\t\t:\r\n\t\t\t<span class=\"seconds\">${this.SECONDS}</span>\r\n\t\t</p>\r\n\t`;\r\n}\r\n\r\nexport default CurrentTime;\r\n","import Widget from './Widget';\r\n\r\nclass Image extends Widget {\r\n\tUNIC_CLASS = 'widget-image';\r\n\tAPI = 'xWrdYakL5fidHlmgDdoilw==m4GHFehrDiaJz3k5';\r\n\tCATEGORY = `nature`;\r\n\tWIDGET;\r\n\r\n\taddListenerOnDinamicElement() {\r\n\t\tthis.WIDGET.addEventListener('click', (e) => {\r\n\t\t\tconst target = e.target.closest('button');\r\n\t\t\tif (!target) return;\r\n\r\n\t\t\tconst role = target.getAttribute('role');\r\n\t\t\tswitch (role) {\r\n\t\t\t\tcase 'update': {\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase 'config': {\r\n\t\t\t\t\tthis.openFormChabgeCategory();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcreateWidget() {\r\n\t\tsuper.createWidget();\r\n\t\tthis.getData();\r\n\r\n\t\tthis.addListenerOnDinamicElement();\r\n\t}\r\n\r\n\tgetData = () => {\r\n\t\tconst img = this.WIDGET.querySelector('img');\r\n\t\tthis.changeDisabledButton(true);\r\n\t\timg.style.display = 'none';\r\n\r\n\t\tfetch(\r\n\t\t\t`https://api.api-ninjas.com/v1/randomimage?category=${this.CATEGORY}`,\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'X-Api-Key': this.API,\r\n\t\t\t\t\tAccept: 'image/jpg',\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t)\r\n\t\t\t.then((res) => res.blob())\r\n\t\t\t.then((myBlob) => {\r\n\t\t\t\tconst url = URL.createObjectURL(myBlob);\r\n\t\t\t\timg.src = url;\r\n\t\t\t\timg.style.display = 'block';\r\n\t\t\t\tthis.changeDisabledButton(false);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tthis.changeDisabledButton(false);\r\n\t\t\t});\r\n\t};\r\n\r\n\topenFormChabgeCategory = () => {\r\n\t\tconst modal = document.querySelector(this.MODAL);\r\n\t\tconst showModal = new Event('show');\r\n\t\tmodal.dispatchEvent(showModal);\r\n\r\n\t\tconst categories = [\r\n\t\t\t'nature',\r\n\t\t\t'city',\r\n\t\t\t'technology',\r\n\t\t\t'food',\r\n\t\t\t'still_life',\r\n\t\t\t'abstract',\r\n\t\t\t'wildlife',\r\n\t\t];\r\n\r\n\t\tconst form = document.createElement('form');\r\n\t\tform.addEventListener('submit', this.changeCategory);\r\n\r\n\t\tconst contentForm = `\r\n\t\t\t\t<select name=\"category\">\r\n\t\t\t\t\t${categories.map(\r\n\t\t\t\t\t\t(category) => `\r\n\t\t\t\t\t<option ${category === this.CATEGORY}>\r\n\t\t\t\t\t\t${category}\r\n\t\t\t\t\t</option />`\r\n\t\t\t\t\t)}\r\n\t\t\t\t</select>\r\n\t\t\t\t<button>Сохранить</button>\r\n\t\t`;\r\n\r\n\t\tform.innerHTML = contentForm;\r\n\t\tmodal.querySelector(this.MODAL_CONTENT).append(form);\r\n\t};\r\n\r\n\tchangeDisabledButton = (value) => {\r\n\t\t[...this.WIDGET.querySelectorAll('button')].forEach(\r\n\t\t\t(button) => (button.disabled = value)\r\n\t\t);\r\n\t};\r\n\r\n\tchangeCategory = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst formData = new FormData(e.target);\r\n\t\tthis.CATEGORY = formData.get('category') || this.CATEGORY;\r\n\t\tconst modal = document.querySelector(this.MODAL);\r\n\t\tmodal.dispatchEvent(new Event('hide'));\r\n\t\tthis.getData();\r\n\t};\r\n\r\n\trender = () => `\r\n\t\t<button class=\"w-control widget__update-button\" role=\"update\">\r\n\t\t\t&#10227;\r\n\t\t</button>\r\n\r\n\t\t<button class=\"w-control widget__config-button\" role=\"config\">\r\n\t\t\t&#9881;\r\n\t\t</button>\r\n\r\n    <div class=\"widget-image__container\">\r\n\t\t\t<div class=\"widget-image__preloader\"></div>\r\n      <img class=\"widget-image__img\" alt=${this.CATEGORY}>\r\n    </div>\r\n  `;\r\n}\r\n\r\nexport default Image;\r\n","import Widget from './Widget';\r\n\r\nclass Valute extends Widget {\r\n\tUNIC_CLASS = 'widget-valute';\r\n\tVALUTES = null;\r\n\r\n\tstatic Instance = null;\r\n\r\n\tconstructor(props) {\r\n\t\tif (Valute.Instance) return Valute.Instance;\r\n\t\tsuper(props);\r\n\r\n\t\tValute.Instance = this;\r\n    return Valute.Instance;\r\n\t}\r\n\r\n\tcreateWidget() {\r\n\t\tsuper.createWidget();\r\n\t\tif (!this.VALUTES) this.update();\r\n\t}\r\n\r\n\tupdate = () => {\r\n\t\tfetch('https://www.cbr-xml-daily.ru/daily_json.js')\r\n\t\t\t.then((res) => res.json())\r\n\t\t\t.then((json) => {\r\n\t\t\t\tthis.VALUTES = json;\r\n\r\n\t\t\t\tconst { usd, diffUsd, eur, diffEur, lastUpdate } = this.getData();\r\n\r\n\t\t\t\tconst widgets = document\r\n\t\t\t\t\t.querySelector(this.CONTAINER)\r\n\t\t\t\t\t.querySelectorAll(`.${this.UNIC_CLASS}`);\r\n          \r\n\t\t\t\t[...widgets].forEach((node) => {\r\n\t\t\t\t\tconst usdNode = node.querySelector('.USD');\r\n\t\t\t\t\tusdNode.classList.remove('growth', 'fall');\r\n\t\t\t\t\tusdNode.classList.add(diffUsd);\r\n\t\t\t\t\tusdNode.querySelector('span.value').innerText = usd;\r\n\r\n\t\t\t\t\tconst eurNode = node.querySelector('.EUR');\r\n\t\t\t\t\teurNode.classList.remove('growth', 'fall');\r\n\t\t\t\t\teurNode.classList.add(diffEur);\r\n\t\t\t\t\teurNode.querySelector('span.value').innerText = eur;\r\n\r\n\t\t\t\t\tnode.querySelector('.last_update').innerText = lastUpdate;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t};\r\n\r\n\tgetData = () => {\r\n\t\tconst usd = this.VALUTES?.Valute?.USD?.Value || 0.0;\r\n\t\tconst diffUsd =\r\n\t\t\tusd - (this.VALUTES?.Valute?.USD?.Previous || 0) > 0 ? 'growth' : 'fall';\r\n\r\n\t\tconst eur = this.VALUTES?.Valute?.EUR?.Value || 0.0;\r\n\t\tconst diffEur =\r\n\t\t\t(eur - this.VALUTES?.Valute?.EUR?.Previous || 0) > 0 ? 'growth' : 'fall';\r\n\r\n\t\tconst lastUpdate = this.VALUTES?.Timestamp\r\n\t\t\t? new Date(this.VALUTES.Timestamp).toLocaleDateString()\r\n\t\t\t: 'Нет данных';\r\n\r\n\t\treturn {\r\n\t\t\tusd,\r\n\t\t\tdiffUsd,\r\n\t\t\teur,\r\n\t\t\tdiffEur,\r\n\t\t\tlastUpdate,\r\n\t\t};\r\n\t};\r\n\r\n\trender = () => {\r\n\t\tconst { usd, diffUsd, eur, diffEur, lastUpdate } = this.getData();\r\n\r\n\t\treturn `\r\n    <div>\r\n      <div class=\"info USD ${diffUsd}\">\r\n        <span class=\"valute\">&#36</span>\r\n        <p class=\"stats\">\r\n          <span class=\"value\">\r\n          ${usd}\r\n          </span>\r\n           руб.\r\n        </p>\r\n      </div>\r\n\r\n      <div class=\"info EUR ${diffEur}\">\r\n        <span class=\"valute\">&#8364;</span>\r\n        <p class=\"stats\">\r\n          <span class=\"value\">\r\n            ${eur}\r\n          </span>\r\n           руб.\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <p class=\"last_update\">\r\n      ${lastUpdate}\r\n    </p>\r\n  \r\n      `;\r\n\t};\r\n}\r\n\r\nexport default Valute;\r\n","import { CurrentTime, Image, Valute } from './widgets';\r\nimport './index.css';\r\n\r\nclass CreateWidgets {\r\n\tCONTAINER = '';\r\n\r\n\tMODAL = '#w-modal';\r\n\tMODAL_CONTENT = '#w-modal__content';\r\n\r\n\tROW = 3;\r\n\tCOLUMNS = 0;\r\n\r\n\tWIDGETS = [\r\n\t\t{ widget: 'time', module: CurrentTime, title: 'Добавить виджет времени' },\r\n\t\t{ widget: 'valute', module: Valute, title: 'Добавить виджет валют' },\r\n\t\t{ widget: 'image', module: Image, title: 'Добавить виджет изображения' },\r\n\t];\r\n\r\n\tconstructor({ container = '#widgets-wrapper', columns = 3 }) {\r\n\t\tthis.CONTAINER = container;\r\n\t\tthis.COLUMNS = columns;\r\n\t\tthis.renderContainer();\r\n\t\tthis.bindEvents();\r\n\t}\r\n\r\n\trenderContainer = () => {\r\n\t\tconst container = document.createElement('div');\r\n\t\tcontainer.classList.add('w-container');\r\n\r\n\t\tconst box = document.createElement('div');\r\n\t\tbox.classList.add('w-cell');\r\n\t\tbox.setAttribute('dropzone', true);\r\n\r\n\t\tfor (let i = 0; i < this.ROW * this.COLUMNS; i++) {\r\n\t\t\tcontainer.append(box.cloneNode());\r\n\t\t}\r\n\r\n\t\tconst modal = document.createElement('div');\r\n\t\tmodal.id = 'w-modal';\r\n\r\n\t\tconst backdrop = document.createElement('div');\r\n\t\tbackdrop.id = 'w-modal__backdrop';\r\n\r\n\t\tconst modalContent = document.createElement('div');\r\n\t\tmodalContent.id = 'w-modal__content';\r\n\r\n\t\tmodal.append(backdrop);\r\n\t\tmodal.append(modalContent);\r\n\r\n\t\tconst button = document.createElement('button');\r\n\t\tbutton.setAttribute('id', 'add-widget');\r\n\t\tbutton.setAttribute('title', 'add widget');\r\n\t\tbutton.setAttribute('role', 'open-modal-with-widgets');\r\n\t\tbutton.innerHTML = '&plus;';\r\n\r\n\t\tconst wrapper = document.querySelector(this.CONTAINER);\r\n\t\twrapper.append(container);\r\n\t\twrapper.append(button);\r\n\t\twrapper.append(modal);\r\n\t};\r\n\r\n\tbindEvents = () => {\r\n\t\tconst container = document.querySelector(this.CONTAINER);\r\n\t\tconst modal = container.querySelector(this.MODAL);\r\n\r\n\t\tmodal.addEventListener('show', (e) => (e.target.style.display = 'flex'));\r\n\t\tmodal.addEventListener('hide', (e) => {\r\n\t\t\tconst target = e.target;\r\n\t\t\ttarget.style.display = '';\r\n\t\t\tconst content = target.querySelector(this.MODAL_CONTENT);\r\n\t\t\tcontent.innerHTML = '';\r\n\t\t});\r\n\r\n\t\tconst backdrop = container.querySelector('#w-modal__backdrop');\r\n\t\tconst hideModal = new Event('hide');\r\n\t\tbackdrop.addEventListener('click', () => modal.dispatchEvent(hideModal));\r\n\r\n\t\tcontainer.addEventListener('click', (e) => {\r\n\t\t\tconst target = e.target.closest('button');\r\n\t\t\tif (!target) return;\r\n\t\t\tconst role = target.getAttribute('role');\r\n\r\n\t\t\tswitch (role) {\r\n\t\t\t\tcase 'open-modal-with-widgets': {\r\n\t\t\t\t\tthis.openModalWithWidgets();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'add-widget': {\r\n\t\t\t\t\tthis.addWidget(target);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\topenModalWithWidgets = () => {\r\n\t\tconst container = document.querySelector(this.CONTAINER);\r\n\t\tconst modal = container.querySelector(this.MODAL);\r\n\t\tconst content = modal.querySelector(this.MODAL_CONTENT);\r\n\r\n\t\tthis.WIDGETS.map((key) => this.appendButton(key, content));\r\n\r\n\t\tmodal.dispatchEvent(new Event('show'));\r\n\t};\r\n\r\n\tappendButton = ({ widget, title }, container) => {\r\n\t\tconst button = document.createElement('button');\r\n\t\tbutton.innerText = title;\r\n\t\tbutton.setAttribute('role', 'add-widget');\r\n\t\tbutton.dataset.widget = widget;\r\n\r\n\t\tcontainer.append(button);\r\n\t};\r\n\r\n\taddWidget = (target) => {\r\n\t\tconst widget = target.dataset.widget || '';\r\n\r\n\t\tconst currentWidget = this.WIDGETS.find((item) => item.widget === widget);\r\n\t\tif (currentWidget) {\r\n\t\t\tconst Module = currentWidget.module;\r\n\t\t\tnew Module({\r\n\t\t\t\tcontainer: this.CONTAINER,\r\n\t\t\t\tbox: '.w-cell',\r\n\t\t\t\tmodal: this.MODAL,\r\n\t\t\t\tmodalContent: this.MODAL_CONTENT,\r\n\t\t\t}).createWidget();\r\n\t\t}\r\n\r\n\t\tconst container = document.querySelector(this.CONTAINER);\r\n\t\tconst modal = container.querySelector(this.MODAL);\r\n\t\tconst hideModal = new Event('hide');\r\n\t\tmodal.dispatchEvent(hideModal);\r\n\t};\r\n}\r\n\r\nnew CreateWidgets({\r\n\tcolumns: 4,\r\n});\r\n"],"names":["$eb102262081e2d62$export$2e2bcd8739ae039","UNIC_CLASS","CONTAINER","BOX","MODAL","MODAL_CONTENT","WIDGET","static","constructor","container","box","modal","modalContent","this","bindEvent","document","addEventListener","e","button","target","closest","widget","close","classList","add","remove","preventDefault","dragover","querySelector","oldDragover","originalWidget","currentWidget","originalBox","append","createWidget","createElement","setAttribute","html","render","currentBox","insertAdjacentHTML","renderButton","boxs","querySelectorAll","i","length","$ed1486d77ed7719e$var$CurrentTime","HOUR","MINUTE","SECONDS","props","Instance","super","updateTime","date","Date","hour","minute","second","toLocaleTimeString","split","ms","getMilliseconds","forEach","node","innerText","setTimeout","requestAnimationFrame","$ed1486d77ed7719e$export$2e2bcd8739ae039","$0da745ca001a9837$export$2e2bcd8739ae039","API","CATEGORY","addListenerOnDinamicElement","getAttribute","getData","openFormChabgeCategory","img","changeDisabledButton","style","display","fetch","headers","Accept","then","res","blob","myBlob","url","URL","createObjectURL","src","catch","err","showModal","Event","dispatchEvent","form","changeCategory","contentForm","map","category","innerHTML","value","disabled","formData","FormData","get","$80aae8d508226cea$var$Valute","VALUTES","update","json","usd","diffUsd","eur","diffEur","lastUpdate","usdNode","eurNode","Valute","USD","Value","Previous","EUR","Timestamp","toLocaleDateString","$80aae8d508226cea$export$2e2bcd8739ae039","ROW","COLUMNS","WIDGETS","module","title","columns","renderContainer","bindEvents","cloneNode","id","backdrop","wrapper","hideModal","openModalWithWidgets","addWidget","content","key","appendButton","dataset","find","item","Module"],"version":3,"file":"index.f00b22dc.js.map"}